

{% load static %}
{% load humanize %}

<link rel="stylesheet" href="{% static 'css/Them.css'%}">
<body>


  {% include "ss/head.html" %}
{% include "ss/header.html" %}





 <body>
    <div class="header">
        <div class="container mt-5 ">
            <div class="row">
                <div class="col-sm-6 ">
                    <h1>Sửa Sản Phẩm {{sp.ten_sp}}</h1>
                </div>
                <div class="col-sm-6">
                    <a href="ss/index.html"><img src="{% static 'images/hinhanh/logo.png'%}" alt="" class="img-fluid"></a>
                </div>
            </div>
        </div>
    </div>
    <div class="body">
        
        <div class="container mt-3">
            <div class="alert" role="alert">
            </div>
        </div>
        <main style=" max-width:70%; margin-left: 230px;">
            <article class="container mt-5">
                <form method="post" enctype="multipart/form-data">
                  {% csrf_token%}
                    <strong> Tên </strong>
                    <input type="text" name="t" class="form-control" value="{{ sp.ten_sp }}">
                    <strong> Giá </strong>
                    <input type="text" name="g" class="form-control" value="{{ sp.gia }}">
                    <strong> Giá giảm </strong>
                    <input type="text" name="gg" class="form-control" value="{{ sp.giam_gia }}">

                    <!-- Hình hiện tại -->
        <div class="mb-3">
          <label class="form-label">Hình hiện tại</label>
          <div class="d-flex flex-wrap">
            {% for h in hinh_da_co %}
              <div class="me-2 mb-2">
               <img src="{{ h.hinh.url }}" width="100" class="img-thumbnail">
              </div>
            {% endfor %}
          </div>
        </div>

            <!-- Upload hình mới -->
        <div class="mb-3">
          <label class="form-label">Thêm hình mới</label>
          <input type="file" name="hinh" multiple class="form-control">
        </div>
                    

        
        <div>
  <h2> Chọn nhà cung cấp </h2>
  {% for n in ncc_list %}
    <label style="display:block; margin-bottom:4px;">
        <input type="radio" name="n" value="{{ n.id }}"
               {% if n.id == ncc_da_co.id %} checked {% endif %}>
        {{ n.ten_ncc }}
    </label>
  {% endfor %}
</div>


       
        <div>
  <h2> Chọn danh mục </h2>
  {% for d in dm_list %}
    <label style="display:block; margin-bottom:4px;">
        <input type="checkbox" name="d" value="{{ d.id }}"
               {% if d in dm_da_co %} checked {% endif %}>
        {{ d.ten_dm }}
    </label>
  {% endfor %}
</div>


<div>
  <h2> Chọn size & cấu hình </h2> <br>

  <table border="1" cellpadding="6" cellspacing="0" width="100%">
    <tr style="text-align:center;">
      <th>Chọn</th>
      <th>Size</th>
      <th>Số lượng</th>
      <th>Loại giá</th>
      <th>Giá riêng</th>
    </tr>

    {% for s in size_list %}
    <tr style="text-align:center;">

      <td>
        <input type="checkbox" name="s" value="{{ s.id }}"
        {% for item in size_da_co %}
          {% if item.size.id == s.id %} checked {% endif %}
        {% endfor %}>
      </td>

      <td>{{ s.size }}</td>

      <td>
        <input type="number" name="sl_{{ s.id }}" style="width:80px"
       value="{% for item in size_da_co %}{% if item.size.id == s.id %}{{ item.so_luong }}{% endif %}{% endfor %}">
      </td>

      <td>
        <select name="lg_{{ s.id }}">
          <option value="none"
          {% for item in size_da_co %}
            {% if item.size.id == s.id and item.loai_gia == 'none' %}selected{% endif %}
          {% endfor %}>Mặc định</option>

          <option value="custom"
          {% for item in size_da_co %}
            {% if item.size.id == s.id and item.loai_gia == 'custom' %}selected{% endif %}
          {% endfor %}>Tuỳ chỉnh</option>
        </select>
      </td>

      <td>
         <input type="text" step="0.01" name="gc_{{ s.id }}" style="width:110px"
          {% for item in size_da_co %}
            {% if item.size.id == s.id and item.gia_custom %}
              value="{{ item.gia_custom }}"
            {% endif %}
          {% endfor %}>
      </td>

    </tr>
    {% endfor %}
  </table>
</div>


                    <button type="submit" class='btthem'>Sửa</button>
                </form>

            </article>
        </main>
    </div>
</body> 





